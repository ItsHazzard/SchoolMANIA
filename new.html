<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SchoolMANIA</title>
  <link rel="icon" href="https://itshazzard.github.io/SchoolMANIA/Photos/Favicon.png" type="image/png">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
</head>
<body>
  <div class="popup-container" id="timetable-popup">
    <div class="popup-content">
      <span class="swap" id="prev-day">&#10094;</span>
      <span class="close-btn-popup" onclick="redirect('A.html')">&#10006;</span>
      <span class="swap" id="next-day">&#10095;</span>
      <div class="color-boxes" id="timetable-data">
        <!-- Timetable data will be dynamically populated here -->
      </div>
    </div>
  </div>

  <script>
    const daysOfWeek = ['Monday-A', 'Tuesday-A', 'Wednesday-A', 'Thursday-A', 'Friday-A']; // Update with all days of the week

    let currentDayIndex = 0;

    window.onload = function() {
      const prevDayBtn = document.getElementById('prev-day');
      const nextDayBtn = document.getElementById('next-day');

      prevDayBtn.addEventListener('click', navigateDay.bind(null, -1));
      nextDayBtn.addEventListener('click', navigateDay.bind(null, 1));

      fetchTimetable();
    };

    function navigateDay(direction) {
      currentDayIndex += direction;
      if (currentDayIndex < 0) {
        currentDayIndex = daysOfWeek.length - 1;
      } else if (currentDayIndex >= daysOfWeek.length) {
        currentDayIndex = 0;
      }
      fetchTimetable();
    }

    function fetchTimetable() {
      fetch('timetable.yaml')
        .then(response => response.text())
        .then(text => {
          const data = jsyaml.load(text);
          const currentDay = daysOfWeek[currentDayIndex];
          populateTimetable(data[currentDay]);
        })
        .catch(error => console.error('Error loading timetable data:', error));
    }

    function redirect(url) {
      window.location.href = url;
    }

    function populateTimetable(timetableData) {
      const colorBoxes = document.getElementById('timetable-data');
      colorBoxes.innerHTML = ''; // Clear any existing content

      timetableData.forEach(entry => {
        const colorBoxContainer = document.createElement('div');
        colorBoxContainer.classList.add('color-box-container');

        const classBox = document.createElement('div');
        classBox.classList.add('class', entry.color);
        classBox.textContent = entry.room;

        const colorBox2 = document.createElement('div');
        colorBox2.classList.add('color-box2', entry.color);
        colorBox2.textContent = entry.class;

        const timeBox = document.createElement('div');
        timeBox.classList.add('time', entry.color);
        timeBox.textContent = entry.time;

        colorBoxContainer.appendChild(classBox);
        colorBoxContainer.appendChild(colorBox2);
        colorBoxContainer.appendChild(timeBox);

        colorBoxes.appendChild(colorBoxContainer);
      });
    }
  </script>
</body>
</html>
